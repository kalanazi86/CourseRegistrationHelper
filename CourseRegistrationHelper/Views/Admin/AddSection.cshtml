
@model AddSectionViewModel

@{
    ViewData["Title"] = "Add Section";
}

<form asp-action="AddSection" method="post">
    <div>
        <label>Select University:</label>
        <select asp-for="UniversityId" asp-items="Model.Universities" onchange="loadColleges()">
            <option value="">-- Select University --</option>
        </select>
    </div>
    <div>
        <label>Select College:</label>
        <select asp-for="CollegeId" asp-items="Model.Colleges" onchange="loadDepartments()">
            <option value="">-- Select College --</option>
        </select>
    </div>
    <div>
        <label>Select Department:</label>
        <select asp-for="DepartmentId" asp-items="Model.Departments" onchange="loadCourses(); loadInstructors();">
            <option value="">-- Select Department --</option>
        </select>
    </div>
    <div>
        <label>Select Course:</label>
        <select asp-for="CourseId" asp-items="Model.Courses" onchange="">
            <option value="">-- Select Course --</option>
        </select>
    </div>
    
    <div>
        <label>CRN:</label>
        <input asp-for="CRN" type="text" />
    </div>

    <div>
        <label>Capacity:</label>
        <input asp-for="Capacity" type="text" />
    </div>

    <div>
        <label>Location:</label>
        <input asp-for="Location" type="text" />
    </div>
    <div>
        <label>Room:</label>
        <input asp-for="Room" type="text" />
    </div>
    <div>
        <!-- Similar inputs for Capacity, Location, Room -->
    </div>
    <div>
        <label>Days:  </label>
        
            <input type="checkbox" id="day1" name="Days" value="1" onchange="updateDays()" />
            <label for="day1">Sunday</label>
        
        
            <input type="checkbox" id="day2" name="Days" value="2" onchange="updateDays()" />
            <label for="day2">Monday</label>
        
        
            <input type="checkbox" id="day3" name="Days" value="3" onchange="updateDays()" />
            <label for="day3">Tuesday</label>
        
        
            <input type="checkbox" id="day4" name="Days" value="4" onchange="updateDays()" />
            <label for="day3">Wednesday</label>
        
        
            <input type="checkbox" id="day5" name="Days" value="5" onchange="updateDays()" />
            <label for="day3">Thursday</label>
        
        <input type="hidden" asp-for="Days" id="Days" />
    </div>

    <div>
        <label>Start Time:</label>
        <select asp-for="StartTime" asp-items="Model.StartTimes">
            <option value="">-- Select Start Time --</option>
        </select>
    </div>

    <div>
        <label>End Time:</label>
        <select asp-for="EndTime" asp-items="Model.EndTimes">
            <option value="">-- Select End Time --</option>
        </select>
    </div>
    <div>
        <label>Select Instructor:</label>
        <select id="InstructorId" asp-for="InstructorId" asp-items="Model.Instructors">
            <option value="">-- Select Instructor --</option>
        </select>
    </div>


    <button type="submit">Add Section</button>
</form>

@section Scripts {
    <script>
        function loadColleges() {
            var universityId = $('#UniversityId').val();
            $.ajax({
                url: '@Url.Action("GetColleges", "Admin")', // Adjust the controller and action names
                type: 'GET',
                data: { universityId: universityId },
                success: function (colleges) {
                    var collegesDropdown = $('#CollegeId');
                    collegesDropdown.empty();
                    collegesDropdown.append('<option value="">-- Select College --</option>');
                    $.each(colleges, function (index, college) {
                        collegesDropdown.append('<option value="' + college.value + '">' + college.text + '</option>');
                    });
                }
            });
        }

        function loadDepartments() {
            var collegeId = $('#CollegeId').val();
            $.ajax({
                url: '@Url.Action("GetDepartments", "Admin")', // Adjust the controller and action names
                type: 'GET',
                data: { collegeId: collegeId },
                success: function (departments) {
                    var departmentsDropdown = $('#DepartmentId');
                    departmentsDropdown.empty();
                    departmentsDropdown.append('<option value="">-- Select Department --</option>');
                    $.each(departments, function (index, department) {
                        departmentsDropdown.append('<option value="' + department.value + '">' + department.text + '</option>');
                    });
                }
            });
        }

        function loadCourses() {
            var departmentId = $('#DepartmentId').val();
            $.ajax({
                url: '@Url.Action("GetCourses", "Admin")', // Adjust the controller and action names
                type: 'GET',
                data: { departmentId: departmentId },
                success: function (courses) {
                    var coursesDropdown = $('#CourseId');
                    coursesDropdown.empty();
                    coursesDropdown.append('<option value="">-- Select Course --</option>');
                    $.each(courses, function (index, course) {
                        coursesDropdown.append('<option value="' + course.value + '">' + course.text + '</option>');
                    });
                }
            });
        }

        function updateDays() {
            var selectedDays = '';
            $('input[name="Days"]:checked').each(function () {
                selectedDays += $(this).val();
            });
            $('#Days').val(selectedDays);
        }

        function loadInstructors() {
            var departmentId = $('#DepartmentId').val();
            $.ajax({
                url: '@Url.Action("GetInstructors", "Admin")',
                type: 'GET',
                data: { departmentId: departmentId },
                success: function (instructors) {
                    var instructorsDropdown = $('#InstructorId');
                    instructorsDropdown.empty();
                    instructorsDropdown.append('<option value="">-- Select Instructor --</option>');
                    $.each(instructors, function (index, instructor) {
                        instructorsDropdown.append('<option value="' + instructor.value + '">' + instructor.text + '</option>');
                    });
                }
            });
        }
        
    </script>
}

